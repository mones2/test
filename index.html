<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sahara – Share your experience</title>
<style>
  :root{
    --bg:#0b0d14; --surface:#111522;
    --g1:rgba(255,255,255,.045); --g2:rgba(255,255,255,.02);
    --border:rgba(255,255,255,.10); --border-2:rgba(255,255,255,.18);
    --text:#f2f4fb; --muted:#aeb3c4;

    /* BLUE gradient */
    --a1:#00c7ff;    /* cyan-blue */
    --a2:#3b82f6;    /* vivid blue */

    --success:#8dffcc;
    --r:20px; --shadow:0 0 30px rgba(0,199,255,.16);
    --focus:0 0 0 4px rgba(0,199,255,.45);
    --base-font:18px; --tap:50px;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font:400 var(--base-font)/1.6 system-ui,-apple-system,Inter,Segoe UI,Roboto,Arial;
    background:
      radial-gradient(1200px 650px at 15% -10%, rgba(0,199,255,.12), transparent 60%),
      radial-gradient(1100px 550px at 90% 110%, rgba(59,130,246,.10), transparent 60%),
      var(--bg);
  }
  .wrap{max-width:920px;margin:32px auto 96px;padding:0 18px}

  h1{margin:0 0 .25rem;font-size:clamp(2.2rem,6vw,3.2rem);letter-spacing:-.02em;line-height:1.1}
  h2{margin:.1rem 0 .9rem;font-size:clamp(1.2rem,3.5vw,1.5rem);font-weight:500;color:var(--muted)}
  .accent{background:linear-gradient(90deg,var(--a1),var(--a2));
    -webkit-background-clip:text;background-clip:text;color:transparent}

  .card{
    background:linear-gradient(180deg,var(--g1),var(--g2)),var(--surface);
    border:1px solid var(--border); border-radius:var(--r);
    box-shadow:var(--shadow); padding:20px; margin-top:14px;
  }
  .hr{height:1px;background:rgba(255,255,255,.12);margin:1rem 0}
  .row{display:flex;flex-wrap:wrap;gap:.8rem;align-items:center}
  .muted{color:var(--muted)}
  .hidden{display:none!important}

  /* Buttons (no glow by default) */
  .btn{
    min-height:var(--tap); min-width:var(--tap);
    display:inline-flex; align-items:center; justify-content:center; gap:.6rem;
    padding:1rem 1.4rem; border-radius:9999px; font-weight:800; letter-spacing:.01em;
    color:#fff; text-decoration:none; border:1px solid var(--border);
    background:linear-gradient(90deg,var(--a1),var(--a2));
    box-shadow:none; cursor:pointer;
  }
  .btn--ghost{
    color:var(--text);
    background:rgba(255,255,255,.06); border:1px solid var(--border);
  }
  .btn[disabled]{opacity:.55;cursor:not-allowed}
  button:focus-visible, a:focus-visible{outline:none; box-shadow:var(--focus)}
  .btn-flex{flex:1 1 240px} /* make Post on Google and Help with AI same size */

  /* Fast glow ONLY for Step 4 "Post on Google" */
  .btn--pulse{ position:relative; isolation:isolate; }
  .btn--pulse::after{
    content:""; position:absolute; inset:-8px; border-radius:inherit; z-index:-1;
    background:linear-gradient(90deg,var(--a1),var(--a2));
    filter:blur(18px); opacity:.7; animation:pulse 1.1s ease-in-out infinite;
  }
  @keyframes pulse{0%,100%{opacity:.45}50%{opacity:.9}}

  /* Experience (first 3) — same BLUE gradient, NO glow */
  .choices{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  .choice{
    padding:18px 20px; border-radius:9999px; font-weight:900; letter-spacing:.01em;
    border:1px solid var(--border);
    color:#fff; background:linear-gradient(90deg,var(--a1),var(--a2));
    text-align:center; transition:transform .12s,border-color .12s;
  }
  .choice:hover{transform:translateY(-2px);border-color:var(--border-2)}

  /* Chips */
  .chips{display:flex;flex-wrap:wrap;gap:.6rem}
  .chip{
    min-height:var(--tap);
    padding:.6rem 1rem;border-radius:999px;border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06); color:var(--text); font-weight:700;
  }
  .chip[aria-pressed="true"]{
    color:#fff;border-color:transparent;background:linear-gradient(90deg,var(--a1),var(--a2));
  }

  textarea{
    width:100%; min-height:112px; border-radius:14px;
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
    color:var(--text); padding:1rem; font:inherit;
  }

  /* Wizard progress slider */
  .meter{ margin:.4rem 0 1rem; }
  .meter-label{font-size:.95rem; color:var(--muted); margin-bottom:.25rem}
  .meter-track{
    position:relative; height:14px; border-radius:9999px;
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
  }
  .meter-fill{
    position:absolute; inset:0 auto 0 0; width:0%; border-radius:9999px;
    background:linear-gradient(90deg,var(--a1),var(--a2));
  }
  .meter-knob{
    position:absolute; top:50%; left:0%; transform:translate(-50%,-50%);
    width:14px; height:14px; background:transparent;
    border:2px solid var(--a2); box-shadow:0 0 0 2px rgba(59,130,246,.25);
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
    border-radius:2px; background-color:rgba(59,130,246,.12);
  }

  /* Negative success */
  .success{text-align:center; padding:36px 20px;}
  .success .circle{
    width:64px;height:64px;border-radius:999px; display:grid; place-items:center;
    background: radial-gradient(100% 100% at 50% 0, rgba(141,255,204,.35), rgba(141,255,204,.16));
    border:1px solid rgba(141,255,204,.45);
    box-shadow:0 0 30px rgba(141,255,204,.28), inset 0 0 14px rgba(141,255,204,.12);
    margin:0 auto 10px;
  }
  .success h3{ margin:.4rem 0 .2rem; font-size:1.35rem }
  .success p{ margin:.1rem 0; color:var(--muted) }

  @media (max-width:860px){ .choices{grid-template-columns:1fr} .btn-flex{flex:1 1 100%} }
  @media (prefers-reduced-motion:reduce){ *{transition:none!important; animation:none!important} }
</style>
</head>
<body>
<main class="wrap">
  <!-- New intro -->
  <h1>Share your experience at <span class="accent">Sahara</span></h1>
  <h2>How was your experience today?</h2>

  <!-- Step 0: Experience -->
  <section id="step0" class="card" aria-labelledby="expLabel">
    <div class="choices" role="group" aria-label="Experience">
      <button class="choice" data-kind="excellent">Excellent</button>
      <button class="choice" data-kind="good">Good</button>
      <button class="choice" data-kind="bad">Not great</button>
    </div>
  </section>

  <!-- Positive: Post on Google + Help with AI (same size) -->
  <section id="positive" class="card hidden" aria-live="polite">
    <div class="row" style="width:100%">
      <a id="googleTop" class="btn btn-flex" href="#" target="_blank" rel="noopener">Post on Google</a>
      <button id="helpAI" class="btn btn--ghost btn-flex">Help with AI</button>
      <span id="gNote" class="muted" aria-live="polite"></span>
    </div>
  </section>

  <!-- Wizard (4 steps; ALWAYS starts at Step 1) -->
  <section id="wizard" class="card hidden" aria-live="polite">
    <div class="row" style="justify-content:space-between">
      <strong id="wLabel">Step 1 of 4</strong>
      <button id="backBtn" class="btn btn--ghost">Back</button>
    </div>

    <!-- Progdsfress slider -->
    <div class="meter" aria-hidden="true">
      <div class="meter-label">Progress</div>
      <div class="meter-track">
        <div id="meterFill" class="meter-fill"></div>
        <div id="meterKnob" class="meter-knob"></div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- Step 1: Pick keywords (unlimited) -->
    <div id="w1">
      <div style="font-weight:800;margin:.2rem 0">Pick keywords</div>
      <div id="kwList" class="chips"></div>
      <div class="hr"></div>
      <div class="row" style="justify-content:flex-end">
        <button id="next1" class="btn">Next</button>
      </div>
    </div>

    <!-- Step 2: Visit type / Parking -->
    <div id="w2" class="hidden">
      <div style="font-weight:800;margin:.2rem 0">Visit type</div>
      <div id="visitType" class="chips" data-single></div>

      <div style="font-weight:800;margin:.9rem 0 .2rem">Parking</div>
      <div id="parking" class="chips" data-single></div>

      <div class="hr"></div>
      <div class="row" style="justify-content:flex-end">
        <button id="next2" class="btn">Next</button>
      </div>
    </div>

    <!-- Step 3: More details -->
    <div id="w3" class="hidden">
      <div style="font-weight:800;margin:.2rem 0">More details</div>
      <textarea id="extra" placeholder="Add a short note..."></textarea>
      <div class="hr"></div>
      <div class="row" style="justify-content:flex-end">
        <button id="next3" class="btn">Next</button>
      </div>
    </div>

    <!-- Step 4: Write your review -->
    <div id="w4" class="hidden">
      <div style="font-weight:800;margin:.2rem 0">Write your review</div>
      <textarea id="review" rows="6"></textarea>
      <div class="row" style="margin-top:.8rem">
        <button id="refineBtn" class="btn btn--ghost">Refine wording</button>
        <button id="copyBtn" class="btn btn--ghost">Copy</button>
        <!-- Glow ONLY here -->
        <a id="googleBottom" class="btn btn--pulse" href="#" target="_blank" rel="noopener">Post on Google</a>
      </div>
    </div>
  </section>

  <!-- Negative -->
  <section id="negative" class="card hidden">
    <div style="font-weight:800;margin:.2rem 0">Quick feedback</div>

    <!-- Three questions stacked (rows) -->
    <div style="margin:.6rem 0">
      <div class="muted">Type</div>
      <div id="nType" class="chips" data-single></div>
    </div>
    <div style="margin:.6rem 0">
      <div class="muted">Meal</div>
      <div id="nMeal" class="chips" data-single></div>
    </div>
    <div style="margin:.6rem 0">
      <div class="muted">Spend</div>
      <div id="nSpend" class="chips" data-single></div>
    </div>

    <div style="font-weight:700;margin:.6rem 0 .2rem">Your feedback (optional)</div>
    <textarea id="nText" placeholder="Type here..."></textarea>
    <div class="row" style="margin-top:1rem">
      <button id="sendNeg" class="btn">Send</button>
      <span id="nStatus" class="muted" role="status" aria-live="polite"></span>
    </div>
  </section>

  <!-- Negative success -->
  <section id="negSuccess" class="card hidden success" aria-live="polite">
    <div class="circle" aria-hidden="true">
      <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
        <path d="M20 6L9 17l-5-5" stroke="#0b2418" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h3>Your feedback was sent to the restaurant.</h3>
    <p>We appreciate your time.</p>
  </section>

  <div id="live" class="hidden" aria-live="polite"></div>
</main>

<script>
/* Google link (set to Sahara Restaurant) */
const GOOGLE_URL = "https://www.google.com/maps/place/Sahara+Restaurant/@40.5000681,-74.4567202,17z/data=!4m8!3m7!1s0x89c3c6ff3e35125b:0xc9ebce3f3d21e043!8m2!3d40.5000681!4d-74.4541453!9m1!1b1!16s%2Fg%2F1tczldzb?hl=en-US&entry=ttu";

const $ = id => document.getElementById(id);
const show = el => el.classList.remove("hidden");
const hide = el => el.classList.add("hidden");

const state = { exp:null, keywords:[], visitType:"", parking:"", extra:"", draft:"" };

/* Experience */
$("step0").querySelectorAll(".choice").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const kind = btn.dataset.kind;
    hide($("step0"));
    if(kind==="bad"){
      state.exp="Not great"; show($("negative")); renderNeg();
    }else{
      state.exp = (kind==="excellent")?"Excellent":"Good";
      show($("positive")); initTopRow();
    }
  });
});

/* Positive top row */
function initTopRow(){
  $("googleTop").href=GOOGLE_URL;
  $("googleBottom").href=GOOGLE_URL;
  $("gNote").textContent="";
  $("helpAI").onclick = ()=>{ hide($("positive")); show($("wizard")); wizard.go(0); }; // start on Step 1
}

/* Wizard controller (4 steps, start at 1) */
const wizard = (()=>{
  const steps=[ $("w1"), $("w2"), $("w3"), $("w4") ];
  let i=0;
  function set(idx){
    i=idx; steps.forEach((s,j)=>s.classList.toggle("hidden", j!==i));
    $("wLabel").textContent = `Step ${i+1} of 4`;
    $("backBtn").disabled = i===0;
    animateMeterTo([0,33,66,100][i]); // 0% → 100%
  }
  return { go:set, next(){ if(i<3) set(i+1); }, back(){ if(i>0) set(i-1); } };
})();
$("backBtn").onclick = ()=> wizard.back();
$("next1").onclick = ()=> { collectStep1(); wizard.next(); };
$("next2").onclick = ()=> { collectStep2(); wizard.next(); };
$("next3").onclick = ()=> { collectStep3(); buildAndType(); wizard.next(); };

/* Progress slider animation (slow, dynamic) */
let meterNow = 0; // %
function animateMeterTo(target){
  target = Math.max(0, Math.min(100, target));
  const start = meterNow;
  const dur = 1200; // ms slow
  const t0 = performance.now();
  (function tick(t){
    const k = Math.min(1,(t - t0)/dur);
    const cur = start + (target - start)*k;
    $("meterFill").style.width = cur + "%";
    $("meterKnob").style.left = cur + "%";
    if(k < 1) requestAnimationFrame(tick); else meterNow = target;
  })(performance.now());
}

/* Step 1: Keywords (unlimited selection) */
const KEYWORDS = [
  "shawarma","hummus","grape leaves","kabob","baklava","tabouleh","falafel","pita","saj",
  "knafeh","chicken kebab","adana","lamb chops","couscous","shepherd’s salad","turkish coffee"
];
function makeChip(label,{single=false}={}){
  const b=document.createElement("button");
  b.className="chip"; b.type="button"; b.textContent=label; b.setAttribute("aria-pressed","false");
  if(single) b.dataset.single="1";
  b.onclick=()=>{
    if(b.dataset.single){
      [...b.parentElement.children].forEach(x=>x.setAttribute("aria-pressed","false"));
      b.setAttribute("aria-pressed","true");
    }else{
      const on = b.getAttribute("aria-pressed")==="true";
      b.setAttribute("aria-pressed", on?"false":"true"); // no limit
    }
  };
  return b;
}
(function renderStep1(){
  const kw = $("kwList"); KEYWORDS.forEach(k=>kw.appendChild(makeChip(k)));
})();
function collectStep1(){
  state.keywords = [...$("kwList").querySelectorAll('.chip[aria-pressed="true"]')].map(x=>x.textContent);
}

/* Step 2: Visit / Parking */
const VISIT = ["Dine-in","Takeout","Delivery"];
const PARK  = ["Street","Lot","Valet","None / not sure"];
(function renderStep2(){
  const vt = $("visitType"); VISIT.forEach(k=>vt.appendChild(makeChip(k,{single:true})));
  const pk = $("parking");  PARK.forEach(k=>pk.appendChild(makeChip(k,{single:true})));
})();
function singleValue(container){ const x=container.querySelector('.chip[aria-pressed="true"]'); return x?x.textContent:""; }
function collectStep2(){
  state.visitType = singleValue($("visitType"));
  state.parking   = singleValue($("parking"));
}

/* Step 3: Textarea */
function collectStep3(){ state.extra = $("extra").value.trim(); }

/* Step 4: Review typing */
function buildReview(){
  const base = "An evening at Sahara was excellent. The kitchen’s care and flavors stood out. Highly recommended.";
  const kw = state.keywords.length ? ` Highlights: ${state.keywords.join(", ")}.` : "";
  const bits = [state.visitType && state.visitType.toLowerCase(), state.parking && (state.parking.toLowerCase()+" parking")].filter(Boolean).join(", ");
  const det = bits ? ` I went for ${bits}.` : "";
  const extra = state.extra ? " " + state.extra : "";
  return base + kw + det + extra;
}
function typewriter(el, text){
  el.value = "";
  let i=0, sp=12;
  const t = setInterval(()=>{ el.value += text[i++]||""; if(i>=text.length) clearInterval(t); }, sp);
}
function buildAndType(){ typewriter($("review"), buildReview()); }
$("refineBtn").onclick = ()=> buildAndType();
$("copyBtn").onclick = async ()=>{
  await navigator.clipboard.writeText($("review").value);
  $("live").textContent = "Copied to clipboard";
  $("copyBtn").textContent = "Copied";
  setTimeout(()=>$("copyBtn").textContent="Copy",1000);
};

/* Negative path */
function renderNeg(){
  ["Dine-in","Takeout","Delivery"].forEach(k=>$("nType").appendChild(makeChip(k,{single:true})));
  ["Breakfast","Brunch","Lunch","Dinner","Other"].forEach(k=>$("nMeal").appendChild(makeChip(k,{single:true})));
  ["$1–10","$10–20","$20–30","$30–50","$50–100","$100+"].forEach(k=>$("nSpend").appendChild(makeChip(k,{single:true})));
}
let sent=false;
$("sendNeg").onclick=()=>{
  if(sent) return; sent=true;
  $("sendNeg").disabled=true; $("nStatus").textContent="Sending…";
  setTimeout(()=>{ hide($("negative")); show($("negSuccess")); }, 850);
};

/* Google links */
$("googleTop").href=GOOGLE_URL; $("googleBottom").href=GOOGLE_URL;
</script>
</body>
</html>
